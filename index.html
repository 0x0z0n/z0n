<!DOCTYPE html>
<html lang="en" data-theme="navy-blog">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>0x0z0n | Security Research Feed</title>
    <link rel="icon" type="image/png" href="assets/tab.png" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

<style>
/* =========================================
   1. THEME ENGINE
   ========================================= */
:root {
    --font-ui: 'Inter', sans-serif;
    --font-mono: 'Fira Code', monospace;
    --sidebar-width: 260px;
    --sidebar-right-width: 280px;
    --radius: 6px;
    --transition: 0.2s ease;
}

/* THEME: NAVY BLOG */
html[data-theme="navy-blog"] {
    --bg-body: #0a192f;
    --bg-card: #112240;
    --bg-sidebar: rgba(10, 25, 47, 0.95);
    
    --text-main: #8892b0;
    --text-heading: #e6f1ff;
    --accent: #64ffda;
    --accent-tint: rgba(100, 255, 218, 0.1);
    
    --border: #233554;
    --search-bg: #112240;
    
    --terminal-bg: #020c1b;
    --terminal-header: #233554;
}

/* THEME: OBSIDIAN */
html[data-theme="obsidian"] {
    --bg-body: #000000;
    --bg-card: #0a0a0a;
    --bg-sidebar: #000000;
    
    --text-main: #999;
    --text-heading: #fff;
    --accent: #fff;
    --accent-tint: #222;
    
    --border: #333;
    --search-bg: #0a0a0a;
    
    --terminal-bg: #050505;
    --terminal-header: #222;
}

/* THEME: SAAS LIGHT */
html[data-theme="light"] {
    --bg-body: #f4f6f8;
    --bg-card: #ffffff;
    --bg-sidebar: #f4f6f8;
    
    --text-main: #5f6c7b;
    --text-heading: #090a0b;
    --accent: #0056b3;
    --accent-tint: #e7f1ff;
    
    --border: #dae1e7;
    --search-bg: #ffffff;
    
    --terminal-bg: #f8f9fa;
    --terminal-header: #e9ecef;
}

/* =========================================
   2. GLOBAL RESET & LAYOUT
   ========================================= */
* { box-sizing: border-box; }

body {
    margin: 0;
    background-color: var(--bg-body);
    color: var(--text-main);
    font-family: var(--font-ui);
    line-height: 1.6;
    font-size: 15px;
    transition: background-color 0.3s, color 0.3s;
}

/* Scrollbar Spy (Hidden but functional) */
::-webkit-scrollbar { width: 0; height: 0; }
* { scrollbar-width: none; -ms-overflow-style: none; }

a { text-decoration: none; color: inherit; transition: var(--transition); }
a:hover { color: var(--accent); }

/* MAIN LAYOUT (No Vertical Lines) */
.layout {
    display: grid;
    grid-template-columns: var(--sidebar-width) 1fr var(--sidebar-right-width);
    gap: 40px; /* Spacing instead of borders */
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
    min-height: 100vh;
}

/* =========================================
   3. SIDEBAR LEFT
   ========================================= */
.sidebar-left {
    position: sticky;
    top: 0;
    height: 100vh;
    padding: 40px 0;
    display: flex;
    flex-direction: column;
    border-right: none; /* No line */
    z-index: 100;
}

.brand {
    font-family: var(--font-mono);
    color: var(--accent);
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 40px;
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    user-select: none;
}

.brand span { color: var(--text-heading); }

.nav-menu a {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 0;
    color: var(--text-main);
    font-size: 14px;
    font-weight: 500;
}

.nav-menu a:hover, .nav-menu a.active {
    color: var(--accent);
    transform: translateX(5px);
}

.nav-menu i { width: 20px; text-align: center; }

#archivePanel { margin-top: auto; }
.section-label {
    font-family: var(--font-mono);
    font-size: 11px;
    color: var(--accent);
    margin-bottom: 15px;
    display: block;
    opacity: 0.8;
}

.archive-list { max-height: 250px; overflow-y: auto; }
.archive-entry {
    display: flex; justify-content: space-between;
    font-size: 13px; padding: 4px 0; color: var(--text-main);
}
.archive-entry:hover { color: var(--accent); }

/* =========================================
   4. MAIN FEED
   ========================================= */
main { padding: 40px 0; }

/* Search */
.search-container { position: sticky; top: 20px; z-index: 50; margin-bottom: 40px; }
.search-input {
    width: 100%;
    background: var(--search-bg);
    border: 1px solid var(--border); /* Box border kept for input clarity */
    padding: 15px 20px 15px 45px;
    border-radius: var(--radius);
    color: var(--text-heading);
    font-family: var(--font-mono);
    font-size: 14px;
    box-shadow: 0 10px 30px -10px rgba(0,0,0,0.3);
    transition: var(--transition);
}
.search-input:focus { outline: none; border-color: var(--accent); }
.search-icon {
    position: absolute; left: 15px; top: 50%; transform: translateY(-50%);
    color: var(--text-main); font-size: 14px; pointer-events: none;
}

/* Cards */
.post-card {
    background: var(--bg-card);
    border-radius: var(--radius);
    padding: 30px;
    margin-bottom: 30px;
    transition: var(--transition);
    position: relative;
    /* No border default */
    border: 1px solid transparent; 
}

.post-card:hover {
    transform: translateY(-5px);
    border-color: var(--border);
    box-shadow: 0 20px 40px -15px rgba(0,0,0,0.3);
}

.post-meta {
    font-family: var(--font-mono);
    font-size: 12px;
    color: var(--accent);
    margin-bottom: 10px;
    display: flex;
    gap: 15px;
}

.post-title { font-size: 24px; margin-bottom: 15px; line-height: 1.3; }
.post-title a { color: var(--text-heading); }
.post-title a:hover { color: var(--accent); }

.post-excerpt { margin-bottom: 20px; font-size: 16px; }

.tags-row { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
.tag-pill {
    font-family: var(--font-mono);
    font-size: 11px;
    background: var(--accent-tint);
    color: var(--accent);
    padding: 4px 10px;
    border-radius: 50px;
    cursor: pointer;
}

/* Terminal (No inner lines) */
.terminal-window {
    background: var(--terminal-bg);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    margin-top: 20px;
    font-family: var(--font-mono);
    font-size: 12px;
    overflow: hidden;
}

.terminal-header {
    background: var(--terminal-header);
    padding: 8px 12px;
    display: flex;
    gap: 6px;
    /* No border bottom */
}

.dot { width: 10px; height: 10px; border-radius: 50%; }
.red { background: #ff5f56; }
.yellow { background: #ffbd2e; }
.green { background: #27c93f; }
.cmd-title { margin-left: auto; color: var(--text-main); font-size: 10px; opacity: 0.7; }

.terminal-body {
    padding: 15px;
    color: var(--text-heading);
    max-height: 260px;
    overflow-y: auto;
}

.log-entry {
    display: grid;
    grid-template-columns: 20px 1fr;
    gap: 10px;
    margin-bottom: 8px;
    padding-bottom: 8px;
    /* Removed row borders */
    border-bottom: none; 
}
.arrow { color: var(--accent); }
.log-label { color: var(--accent); opacity: 0.8; margin-right: 5px; }

/* =========================================
   5. SIDEBAR RIGHT
   ========================================= */
.sidebar-right {
    position: sticky;
    top: 0;
    height: 100vh;
    padding: 40px 0;
    border-left: none; /* No line */
    overflow-y: auto;
}

.widget { margin-bottom: 40px; }
.widget-list { list-style: none; padding: 0; }
.widget-list li { margin-bottom: 8px; }
.widget-list a {
    color: var(--text-main);
    font-size: 14px;
    display: flex;
    justify-content: space-between;
}
.widget-list a:hover { color: var(--accent); }

/* =========================================
   6. CONTROLS
   ========================================= */
.theme-switch {
    position: fixed; bottom: 30px; left: 30px; z-index: 200;
    width: 40px; height: 40px; border-radius: 50%;
    background: var(--bg-card); border: 1px solid var(--accent);
    color: var(--accent); display: flex; align-items: center; justify-content: center;
    cursor: pointer; box-shadow: 0 10px 20px rgba(0,0,0,0.2); transition: var(--transition);
}
.theme-switch:hover { transform: rotate(15deg) scale(1.1); background: var(--accent-tint); }

.mobile-toggle {
    display: none; position: fixed; top: 20px; right: 20px; z-index: 200;
    background: var(--bg-card); border: 1px solid var(--accent);
    color: var(--accent); padding: 10px; border-radius: var(--radius);
}

@media (max-width: 1100px) {
    .layout { grid-template-columns: 220px 1fr; gap: 30px; }
    .sidebar-right { display: none; }
}

@media (max-width: 768px) {
    .layout { display: block; padding: 80px 20px 20px 20px; }
    .sidebar-left {
        position: fixed; left: -100%; top: 0; width: 280px;
        transition: left 0.3s; box-shadow: 10px 0 30px rgba(0,0,0,0.5);
        background: var(--bg-card);
    }
    .sidebar-left.active { left: 0; }
    .mobile-toggle { display: block; }
    .search-container { top: 10px; }
}

#introOverlay {
    position: fixed; inset: 0; background: var(--bg-body); z-index: 9999;
    display: flex; align-items: center; justify-content: center;
    font-family: var(--font-mono); color: var(--accent);
}
.intro-hide { opacity: 0; pointer-events: none; transition: 0.5s; }
</style>
</head>
<body>

    <div id="introOverlay">
        <div>> ESTABLISHING SECURE CONNECTION...</div>
    </div>

    <button class="mobile-toggle" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
    <button class="theme-switch" onclick="cycleTheme()" title="Toggle Theme"><i class="fas fa-adjust"></i></button>

    <div class="layout">
        
        <aside class="sidebar-left">
            <div class="brand" id="brandLogo">
                0x0z0n <span>/LOGS</span>
            </div>

            <nav class="nav-menu">
                <a href="index.html" class="active"><i class="fas fa-satellite-dish"></i> Intel Feed</a>
                <a href="#"><i class="fas fa-bug"></i> CVE Analysis</a>
                <a href="#"><i class="fas fa-user-secret"></i> Red Teaming</a>
                <a href="#"><i class="fas fa-terminal"></i> CTF Writeups</a>
                <a href="https://0x0z0n.github.io/Portfolio/assets/Kshitij_Raut.html" target="_blank"><i class="far fa-file-alt"></i> Resume</a>
                <a href="https://github.com/0x0z0n" target="_blank"><i class="fab fa-github"></i> GitHub</a>
            </nav>

            <div id="archivePanel">
                <span class="section-label">// ARCHIVE</span>
                <div id="archiveList" class="archive-list"></div>
            </div>
        </aside>

        <main>
            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="searchInput" class="search-input" placeholder="Search logs by keyword, TTP, or CVE ID..." />
            </div>

            <div id="feed">
                <div style="text-align:center; padding: 40px; color: var(--text-main); font-family: var(--font-mono);">
                    Initializing data stream...
                </div>
            </div>

            <footer style="margin-top: 50px; text-align: center; color: var(--text-main); font-size: 13px; font-family: var(--font-mono);">
                &copy; 2025 - 2026 0x0z0n Security
            </footer>
        </main>

        <aside class="sidebar-right">
            <div class="widget">
                <span class="section-label">// CATEGORIES</span>
                <ul class="widget-list" id="catList"></ul>
            </div>
            <div class="widget">
                <span class="section-label">// QUICK ACCESS</span>
                <ul class="widget-list">
                    <li><a href="posts/Cheatsheet.html">TTP Cheatsheet <i class="fas fa-external-link-alt"></i></a></li>
                    <li><a href="#">Malware Zoo <i class="fas fa-lock"></i></a></li>
                </ul>
            </div>
            <div class="widget">
                <span class="section-label">// TAG CLOUD</span>
                <div id="tagCloud" style="display: flex; flex-wrap: wrap; gap: 8px;"></div>
            </div>
        </aside>
    </div>

<script>
/* =========================================
   R3S ENCRYPTION / EASTER EGG LOGIC
   ========================================= */
const r3S = "bG10aC5TM1IvUzNSL2dvbEIvb2kuYnVodGlnLm4wejB4MC8vOnNwdHRo"; 

let clickCount = 0;
let firstClickTime = 0;
const CLICK_LIMIT = 8;
const WINDOW_MS = 5000;

function base64ToString(b64){
  try {
    const bin = atob(b64);
    return new TextDecoder().decode(Uint8Array.from(bin.split('').map(c=>c.charCodeAt(0))));
  } catch(e){ return null; }
}

function triggerEasterEgg(){ 
    // 1. Decode the hidden URL
    const rev = base64ToString(r3S);
    const url = rev ? rev.split('').reverse().join('') : null;
    
    if(url) {
        console.log("Easter Egg Triggered: Opening " + url);
        
        // 2. Open IMMEDIATELY to bypass popup blockers
        window.open(url, '_blank');

        // 3. Visual Cue (Fade out current page)
        document.body.style.transition = "0.5s";
        document.body.style.opacity = "0.3";

        // 4. Reset opacity if they come back
        setTimeout(() => { document.body.style.opacity = "1"; }, 2000);
    }
}

// Attach logic to Brand Logo
const brandBtn = document.getElementById("brandLogo");
if(brandBtn){
    brandBtn.addEventListener("click", (e) => {
      e.preventDefault(); 
      
      const now = Date.now();
      // Reset if too much time has passed
      if(!firstClickTime || (now - firstClickTime) > WINDOW_MS){ 
          firstClickTime = now; 
          clickCount = 0; 
      }
      
      clickCount++;
      // Visual Feedback (Text color flicker)
      brandBtn.style.color = (clickCount % 2 === 0) ? "#ff5f56" : "var(--accent)";

      if(clickCount >= CLICK_LIMIT){ 
          clickCount = 0; 
          firstClickTime = 0; 
          triggerEasterEgg(); 
      }
    });
}


/* =========================================
   STANDARD UI LOGIC
   ========================================= */

// 1. Theme Management
const themes = ['navy-blog', 'obsidian', 'light'];
let currentTheme = localStorage.getItem('blog_theme') || 'navy-blog';
document.documentElement.setAttribute('data-theme', currentTheme);

function cycleTheme() {
    const idx = themes.indexOf(currentTheme);
    currentTheme = themes[(idx + 1) % themes.length];
    document.documentElement.setAttribute('data-theme', currentTheme);
    localStorage.setItem('blog_theme', currentTheme);
}

// 2. Mobile Menu
function toggleSidebar() {
    const sb = document.querySelector('.sidebar-left');
    if(sb) sb.classList.toggle('active');
}

// 3. Render Terminal
function renderTerminal(path) {
    if(!path) return '';
    const steps = Array.isArray(path) ? path : [path];
    
    if(steps.length === 0) return '';

    const logs = steps.map((s) => `
        <div class="log-entry">
            <div class="arrow">âžœ</div>
            <div class="log-content">
                ${s.technique ? `<div><span class="log-label">TTP:</span>${safe(s.technique)}</div>` : ''}
                ${s.user ? `<div><span class="log-label">USR:</span>${safe(s.user)}</div>` : ''}
                ${s.result ? `<div style="color:var(--text-heading)">${safe(s.result)}</div>` : ''}
                ${s.mitigation ? `<div style="color:#27c93f; margin-top:4px;">[FIX] ${safe(s.mitigation)}</div>` : ''}
            </div>
        </div>
    `).join('');

    return `
    <div class="terminal-window">
        <div class="terminal-header">
            <div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div>
            <div class="cmd-title">attack_trace.log</div>
        </div>
        <div class="terminal-body">${logs}</div>
    </div>`;
}

// 4. Data Processing
const feedEl = document.getElementById('feed');
const catEl = document.getElementById('catList');
const tagEl = document.getElementById('tagCloud');
const arcEl = document.getElementById('archiveList');
let allPosts = [];

function safe(str) { 
    return String(str || "").replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;"); 
}

function render(posts) {
    if(!feedEl) return;
    if(posts.length === 0) {
        feedEl.innerHTML = `<div style="text-align:center; padding:40px; font-family:var(--font-mono); color:var(--text-main);">No signals found matching query.</div>`;
        return;
    }
    feedEl.innerHTML = posts.map(p => {
        const tags = (Array.isArray(p.tags) ? p.tags : [p.tags]).filter(Boolean);
        const tagHTML = tags.map(t => `<span class="tag-pill" onclick="filter('${safe(t)}')">#${safe(t)}</span>`).join('');
        return `
        <article class="post-card">
            <div class="post-meta">
                <span>${safe(p.date)}</span>
                <span>//</span>
                <span>${safe(p.category)}</span>
            </div>
            <h2 class="post-title"><a href="${safe(p.href)}">${safe(p.title)}</a></h2>
            <p class="post-excerpt">${safe(p.excerpt)}</p>
            <div class="tags-row">${tagHTML}</div>
            ${renderTerminal(p.attack_path)}
        </article>
        `;
    }).join('');
}

function processData(data) {
    allPosts = data;
    let cats = {}, tags = {}, archive = {};

    data.forEach(p => {
        const cList = Array.isArray(p.category) ? p.category : [p.category];
        cList.forEach(c => { if(c) cats[c] = (cats[c]||0)+1; });
        const tList = Array.isArray(p.tags) ? p.tags : [p.tags];
        tList.forEach(t => { if(t) tags[t] = (tags[t]||0)+1; });
        const d = new Date(p.date);
        if(!isNaN(d)) {
            const k = d.toLocaleDateString('en-US', {month:'short', year:'numeric'});
            if(!archive[k]) archive[k] = [];
            archive[k].push(p);
        }
    });

    if(catEl) catEl.innerHTML = Object.keys(cats).map(c => `<li><a href="#" onclick="filter('${c}'); return false;">${c} <span class="count">[${cats[c]}]</span></a></li>`).join('');
    if(tagEl) tagEl.innerHTML = Object.keys(tags).map(t => `<span class="tag-pill" onclick="filter('${t}')">${t}</span>`).join('');
    if(arcEl) arcEl.innerHTML = Object.keys(archive).sort((a,b)=>new Date(b)-new Date(a)).map(month => `
        <div style="margin-bottom:15px;">
            <div style="font-family:var(--font-mono); font-size:11px; color:var(--accent); margin-bottom:5px;">${month}</div>
            ${archive[month].map(p => `<a href="${p.href}" class="archive-entry"><span>${p.title.substring(0,25)}${p.title.length>25?'...':''}</span> <span class="count">${new Date(p.date).getDate()}</span></a>`).join('')}
        </div>
    `).join('');

    // --- CHECK URL FOR SEARCH PARAMETER ---
    const urlParams = new URLSearchParams(window.location.search);
    const initialQuery = urlParams.get('search');
    
    if(initialQuery) {
        filter(initialQuery);
    } else {
        render(allPosts);
    }
}

// 5. Search Logic
window.filter = (term) => {
    const sInput = document.getElementById('searchInput');
    if(sInput) sInput.value = term;
    const q = term.toLowerCase();
    const filtered = allPosts.filter(p => JSON.stringify(p).toLowerCase().includes(q));
    render(filtered);
    // Only scroll if called via user interaction or initial load with param
    if(term) window.scrollTo({top:0, behavior:'smooth'});
};
const sInput = document.getElementById('searchInput');
if(sInput) {
    sInput.addEventListener('input', (e) => {
        const q = e.target.value.toLowerCase();
        const filtered = allPosts.filter(p => JSON.stringify(p).toLowerCase().includes(q));
        render(filtered);
    });
}

// 6. Init
fetch("data/posts.json")
    .then(r => r.json())
    .then(processData)
    .catch(e => {
        if(feedEl) feedEl.innerHTML = `<div style="text-align:center; color:#ff5f56;">Error: Connection to data feed failed.</div>`;
    });

window.addEventListener('load', () => {
    if(!sessionStorage.getItem('intro_v5')) {
        setTimeout(() => {
            const ov = document.getElementById('introOverlay');
            if(ov) {
                ov.classList.add('intro-hide');
                setTimeout(()=>ov.style.display='none', 500);
            }
            sessionStorage.setItem('intro_v5', 'true');
        }, 1200);
    } else {
        const ov = document.getElementById('introOverlay');
        if(ov) ov.style.display='none';
    }
});
</script>
</body>
</html>
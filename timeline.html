<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <title>0x0z0n Blog | Archives</title>
    <link rel="icon" type="image/png" href="assets/tab.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&display=swap" rel="stylesheet">

    <style>
      :root {
  --bg-color: #0d1117;          /* Dark background */
  --card-bg: #161b22;           /* Section/card background */
  --text-color: #c9d1d9;        /* Default text */
  --accent: #32cd32;            /* Neon green */
  --tag-bg: #0f0f0f;
  --tag-hover: #28a428;
  --border-glow: 0 0 6px #32cd3299; /* Softer glow */
}

/* Headings */
h1 {
  color: var(--accent);
  text-shadow: 0 0 4px var(--accent); /* reduced from 6px */
  border-bottom: 2px solid var(--accent);
}

/* Month labels */
.month {
  color: var(--accent);
  text-shadow: 0 0 4px var(--accent); /* softer */
}

/* Timeline dots */
.entry::before {
  background: var(--accent);
  box-shadow: 0 0 5px var(--accent); /* was 8px */
}

/* Links */
.entry a {
  color: #00ffcc;
  text-shadow: 0 0 3px #00ffcc66; /* softer cyan glow */
}
.entry a:hover {
  color: var(--accent);
  text-shadow: 0 0 5px var(--accent); /* toned down */
}

/* Date */
.entry span {
  color: #32cd32;
  text-shadow: 0 0 3px #32cd3266; /* less glow */
}

/* Hover background */
.entry:hover {
  background: rgba(22, 27, 34, 0.7); /* slightly darker blur */
  box-shadow: 0 0 8px rgba(50, 205, 50, 0.25); /* was 12px & stronger */
}

/* Theme toggle icon */
.theme-toggle {
  color: var(--accent);
  text-shadow: 0 0 5px var(--accent); /* reduced glow */
}

    </style>
     
  </head>
  <body>
    <div class="theme-toggle" title="Toggle Theme">
      <i class="fas fa-circle-half-stroke"></i>
    </div>

    <main>
      <h1>ChronoLogs</h1>
      <div class="timeline" id="archiveList"></div>
    </main>

    <script>
      fetch("data/posts.json").then(res => res.json()).then(posts => {
        posts.sort((a, b) => new Date(b.date) - new Date(a.date));
        const grouped = {};
        posts.forEach(post => {
          const d = new Date(post.date);
          const month = d.toLocaleDateString('en-GB', { year: 'numeric', month: 'short' });
          const day = d.toLocaleDateString('en-GB', { day: '2-digit', month: 'short' });
          if (!grouped[month]) grouped[month] = [];
          grouped[month].push({ ...post, formattedDate: day });
        });
        const container = document.getElementById("archiveList");
        container.innerHTML = "";
        Object.entries(grouped).forEach(([month, entries]) => {
          const monthDiv = document.createElement("div");
          monthDiv.className = "month";
          monthDiv.textContent = month;
          container.appendChild(monthDiv);
          entries.forEach(entry => {
            const item = document.createElement("div");
            item.className = "entry";
            item.innerHTML = `<span>${entry.formattedDate}</span><a href="${entry.href}">${entry.title}</a>`;
            container.appendChild(item);
          });
        });
      }).catch(err => {
        document.getElementById("archiveList").innerHTML = "<p style='color:red;'>Failed to load archive data.</p>";
        console.error("Error loading posts.json:", err);
      });
    </script>

    <script>
      const toggle = document.querySelector(".theme-toggle");
      const icon = toggle.querySelector("i");
      const star = document.getElementById("shooting-star");

      const currentTheme = localStorage.getItem("theme") || "dark";
      document.documentElement.setAttribute("data-theme", currentTheme);
      icon.className = currentTheme === "light" ? "fas fa-sun" : "fas fa-moon";

      toggle.addEventListener("click", () => {
        const newTheme = document.documentElement.getAttribute("data-theme") === "dark" ? "light" : "dark";
        document.documentElement.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);
        icon.className = newTheme === "light" ? "fas fa-sun" : "fas fa-moon";

        if (newTheme === "light") {
          star.style.top = `${Math.random() * 40 + 10}px`;
          star.style.left = `${Math.random() * 40 + 10}px`;
          star.style.opacity = 1;
          star.style.animation = "shoot 0.8s ease-out";
          setTimeout(() => {
            star.style.animation = "";
            star.style.opacity = 0;
          }, 800);
        }
      });
    </script>

    <div id="shooting-star"></div>
  </body>
</html>
